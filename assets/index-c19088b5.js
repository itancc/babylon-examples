import{a as Y,g as Q,r as g,s as $,B as Z,m as tt,n as u,_ as p,o as m,p as et,u as nt,c as ot,j as f,d as M,i as it,q as rt,k as st}from"./index-3f3d354e.js";import{B as at}from"./FullBox-46f612a9.js";function ct(t){return Q("MuiButton",t)}const lt=Y("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),y=lt,dt=g.createContext({}),pt=dt,ut=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],gt=t=>{const{color:e,disableElevation:n,fullWidth:o,size:i,variant:r,classes:s}=t,a={root:["root",r,`${r}${u(e)}`,`size${u(i)}`,`${r}Size${u(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${u(i)}`],endIcon:["endIcon",`iconSize${u(i)}`]},l=it(a,ct,s);return p({},s,l)},O=t=>p({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ft=$(Z,{shouldForwardProp:t=>tt(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${u(n.color)}`],e[`size${u(n.size)}`],e[`${n.variant}Size${u(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,o;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],r=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return p({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":p({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:m(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:m(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:m(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":p({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${y.focusVisible}`]:p({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${y.disabled}`]:p({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${m(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(o=t.palette).getContrastText)==null?void 0:n.call(o,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${y.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${y.disabled}`]:{boxShadow:"none"}}),ht=$("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${u(n.size)}`]]}})(({ownerState:t})=>p({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},O(t))),vt=$("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${u(n.size)}`]]}})(({ownerState:t})=>p({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},O(t))),bt=g.forwardRef(function(e,n){const o=g.useContext(pt),i=et(o,e),r=nt({props:i,name:"MuiButton"}),{children:s,color:a="primary",component:l="button",className:c,disabled:d=!1,disableElevation:E=!1,disableFocusRipple:T=!1,endIcon:w,focusVisibleClassName:V,fullWidth:H=!1,size:q="medium",startIcon:R,type:B,variant:K="text"}=r,G=ot(r,ut),b=p({},r,{color:a,component:l,disabled:d,disableElevation:E,disableFocusRipple:T,fullWidth:H,size:q,type:B,variant:K}),v=gt(b),J=R&&f.jsx(ht,{className:v.startIcon,ownerState:b,children:R}),X=w&&f.jsx(vt,{className:v.endIcon,ownerState:b,children:w});return f.jsxs(ft,p({ownerState:b,className:M(o.className,v.root,c),component:l,disabled:d,focusRipple:!T,focusVisibleClassName:M(v.focusVisible,V),ref:n,type:B},G,{classes:v,children:[J,s,X]}))}),mt=bt,yt=500,xt=20,_t=300,Et="https://stackblitz.com",N=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],It=["project","search","ports","settings"],$t=["light","dark"],St=["editor","preview"],k={clickToLoad:t=>h("ctl",t),devToolsHeight:t=>D("devtoolsheight",t),forceEmbedLayout:t=>h("embed",t),hideDevTools:t=>h("hidedevtools",t),hideExplorer:t=>h("hideExplorer",t),hideNavigation:t=>h("hideNavigation",t),openFile:t=>L("file",t),showSidebar:t=>Ct("showSidebar",t),sidebarView:t=>I("sidebarView",t,It),startScript:t=>L("startScript",t),terminalHeight:t=>D("terminalHeight",t),theme:t=>I("theme",t,$t),view:t=>I("view",t,St),zenMode:t=>h("zenMode",t)};function F(t={}){const e=Object.entries(t).map(([n,o])=>o!=null&&k.hasOwnProperty(n)?k[n](o):"").filter(Boolean);return e.length?`?${e.join("&")}`:""}function h(t,e){return e===!0?`${t}=1`:""}function Ct(t,e){return typeof e=="boolean"?`${t}=${e?"1":"0"}`:""}function D(t,e){if(typeof e=="number"&&!Number.isNaN(e)){const n=Math.min(100,Math.max(0,e));return`${t}=${encodeURIComponent(Math.round(n))}`}return""}function I(t,e="",n=[]){return n.includes(e)?`${t}=${encodeURIComponent(e)}`:""}function L(t,e){return(Array.isArray(e)?e:[e]).filter(o=>typeof o=="string"&&o.trim()!=="").map(o=>`${t}=${encodeURIComponent(o)}`).join("&")}function U(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function S(t,e){return`${W(e)}${t}${F(e)}`}function C(t,e){const n={forceEmbedLayout:!0};return e&&typeof e=="object"&&Object.assign(n,e),`${W(n)}${t}${F(n)}`}function W(t={}){return(typeof t.origin=="string"?t.origin:Et).replace(/\/$/,"")}function z(t,e,n){if(!e||!t||!t.parentNode)throw new Error("Invalid Element");t.id&&(e.id=t.id),t.className&&(e.className=t.className),zt(e,n),t.replaceWith(e)}function j(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`Could not find element with id '${t}'`);return e}else if(t instanceof HTMLElement)return t;throw new Error(`Invalid element: ${t}`)}function P(t){return t&&t.newWindow===!1?"_self":"_blank"}function zt(t,e={}){const n=Object.hasOwnProperty.call(e,"height")?`${e.height}`:`${_t}`,o=Object.hasOwnProperty.call(e,"width")?`${e.width}`:void 0;t.setAttribute("height",n),o?t.setAttribute("width",o):t.setAttribute("style","width:100%;")}class jt{constructor(e){this.pending={},this.port=e,this.port.onmessage=this.messageListener.bind(this)}request({type:e,payload:n}){return new Promise((o,i)=>{const r=U();this.pending[r]={resolve:o,reject:i},this.port.postMessage({type:e,payload:{...n,__reqid:r}})})}messageListener(e){var a;if(typeof((a=e.data.payload)==null?void 0:a.__reqid)!="string")return;const{type:n,payload:o}=e.data,{__reqid:i,__success:r,__error:s}=o;this.pending[i]&&(r?this.pending[i].resolve(this.cleanResult(o)):this.pending[i].reject(s?`${n}: ${s}`:n),delete this.pending[i])}cleanResult(e){const n={...e};return delete n.__reqid,delete n.__success,delete n.__error,Object.keys(n).length?n:null}}class Pt{constructor(e,n){this.editor={openFile:o=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:o}}),setCurrentFile:o=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:o}}),setTheme:o=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:o}}),setView:o=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:o}}),showSidebar:(o=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:o}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(o=>(o==null?void 0:o.url)??null),setUrl:(o="/")=>{if(typeof o!="string"||!o.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${o}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:o}})}},this._rdc=new jt(e),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}applyFsDiff(e){const n=o=>o!==null&&typeof o=="object";if(!n(e)||!n(e.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(e.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}}const x=[];class Tt{constructor(e){this.id=U(),this.element=e,this.pending=new Promise((n,o)=>{const i=({data:c,ports:d})=>{(c==null?void 0:c.action)==="SDK_INIT_SUCCESS"&&c.id===this.id&&(this.vm=new Pt(d[0],c.payload),n(this.vm),s())},r=()=>{var c;(c=this.element.contentWindow)==null||c.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(l),window.removeEventListener("message",i)}window.addEventListener("message",i),r();let a=0;const l=window.setInterval(()=>{if(this.vm){s();return}if(a>=xt){s(),o("Timeout: Unable to establish a connection with the StackBlitz VM"),x.forEach((c,d)=>{c.id===this.id&&x.splice(d,1)});return}a++,r()},yt)}),x.push(this)}}const wt=t=>{const e=t instanceof Element?"element":"id";return x.find(n=>n[e]===t)??null};function Rt(t,e){const n=document.createElement("input");return n.type="hidden",n.name=t,n.value=e,n}function Bt(t){return t.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function A({template:t,title:e,description:n,dependencies:o,files:i,settings:r}){if(!N.includes(t)){const c=N.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${c}`)}const s=[],a=(c,d,E="")=>{s.push(Rt(c,typeof d=="string"?d:E))};a("project[title]",e),typeof n=="string"&&n.length>0&&a("project[description]",n),a("project[template]",t,"javascript"),o&&(t==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):a("project[dependencies]",JSON.stringify(o))),r&&a("project[settings]",JSON.stringify(r)),Object.entries(i).forEach(([c,d])=>{a(`project[files][${Bt(c)}]`,d)});const l=document.createElement("form");return l.method="POST",l.setAttribute("style","display:none!important;"),l.append(...s),l}function Mt(t,e){const n=A(t);return n.action=C("/run",e),n.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();<\/script>
</body>
</html>`}function Nt(t,e){const n=A(t);n.action=S("/run",e),n.target=P(e),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function _(t){return t!=null&&t.contentWindow?(wt(t)??new Tt(t)).pending:Promise.reject("Provided element is not an iframe.")}function kt(t,e){Nt(t,e)}function Dt(t,e){const n=S(`/edit/${t}`,e),o=P(e);window.open(n,o)}function Lt(t,e){const n=S(`/github/${t}`,e),o=P(e);window.open(n,o)}function Ot(t,e,n){var s;const o=j(t),i=Mt(e,n),r=document.createElement("iframe");return z(o,r,n),(s=r.contentDocument)==null||s.write(i),_(r)}function Ft(t,e,n){const o=j(t),i=document.createElement("iframe");return i.src=C(`/edit/${e}`,n),z(o,i,n),_(i)}function Ut(t,e,n){const o=j(t),i=document.createElement("iframe");return i.src=C(`/github/${e}`,n),z(o,i,n),_(i)}const Wt={connect:_,embedGithubProject:Ut,embedProject:Ot,embedProjectId:Ft,openGithubProject:Lt,openProject:kt,openProjectId:Dt},Ht=()=>{const t=g.useRef(null),[e,n]=g.useState(),{name:o}=rt();console.log(o);const i=st(),r=async()=>{const a=t.current,l=await Wt.embedProject(a,{title:"JS Starter",description:"Blank starter project for building ES6 apps.",template:"javascript",files:{"index.html":'<div id="app"></div>',"index.js":`import './style.css';
        const appDiv = document.getElementById('app');
        appDiv.innerHTML = '<h1>JS Starter</h1>';`,"style.css":"body { font-family: system-ui, sans-serif; }"},settings:{compile:{trigger:"auto",clearConsole:!1}}},{openFile:"index.js",terminalHeight:50,theme:"dark"});n(l)};g.useEffect(()=>{r()},[e]);const s=()=>{i("/")};return f.jsxs(at,{sx:{p:3},children:[f.jsx(mt,{variant:"contained",sx:{mb:2},onClick:s,children:"返回"}),f.jsx(g.Suspense,{children:f.jsx("div",{ref:t})})]})};export{Ht as default};
